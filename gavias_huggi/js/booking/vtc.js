	var tbjQuery = jQuery.noConflict(true);
	//var TBF_BASE_URL = 'https://www.jeffvtcparis.com/';
	//var TBF_BASE_URL = 'https://vtc.tunisieproduitetservice.com/';
	//var TBF_BASE_URL = 'https://jeffvtcparis.com/dev/';
	var TBF_BASE_URL = 'https://jeffvtcparis.com/';
	
	var BOOKING_FORM_URL = '/taxibooking?tmpl=component';
	var ACCOUNTS_URL = '/account?tmpl=component';
	var clientIP = '91.134.248.235';
	var selectedAreaVerticesStr = '[[50.93938953512465,1.5384785976561943],[50.283632721460954,1.5274922695311943],[50.11463119731849,1.4396016445311943],[49.93807107958389,1.0770528164061943],[49.8495475517013,0.5442159023436943],[49.69875135416319,0.14596150781244432],[49.509170982921084,0.045711263671819324],[49.44982908187676,0.17136739160150682],[49.355768815485305,0.036441549316350574],[49.30867110447844,-0.18482996557622755],[49.33524415832756,-0.4273016605225166],[49.34136767732006,-0.7133324298706611],[49.38020466775743,-0.9771974239197334],[49.4139089314898,-1.1530752334442695],[49.537812444174584,-1.3069321069565376],[49.62100353140912,-1.2300519499626716],[49.683875183663616,-1.3564067933407387],[49.67974951978793,-1.5184611681547722],[49.6776865565718,-1.643433668061789],[49.71218834240458,-1.9146601523902973],[49.60143397519413,-1.8744921445545515],[49.40318727009453,-1.8763807968866786],[49.18901135484418,-1.6356259043027421],[48.95187971035491,-1.614125411135774],[48.75327597603861,-1.6143614926772898],[48.64642039265942,-1.5156025803230477],[48.61470204793534,-1.7628539835209267],[48.693199344643304,-1.8864796851198662],[48.68165229531058,-2.025196832794336],[48.632332158190756,-2.182446031631571],[48.68024463329032,-2.3379749279251882],[48.609840424292976,-2.503630001071997],[48.54551693202398,-2.7073071470204013],[48.883135926965,-3.0838039231196035],[48.834618337662576,-3.5027652017942046],[48.82480999107018,-3.624355216131562],[48.71853088596416,-3.608245926425184],[48.72332145980343,-3.8309041721970516],[48.660448666554736,-3.9092743107080423],[48.71604224024586,-3.981418364338424],[48.67131698214865,-4.358066563028615],[48.60537056114536,-4.64526761549871],[48.455921410489964,-4.766895485483815],[48.30603103218111,-4.767673746093806],[47.88204260336774,-4.547947183593806],[47.84599554741089,-3.8228495273438057],[47.62103008150722,-3.1087381992188057],[47.50200060669556,-2.8134806308594307],[47.50158746790846,-2.6940043125000557],[47.4937517115401,-2.5086100253906807],[47.44527234905199,-2.448871866210993],[47.324292812049336,-2.6277430209961494],[47.262715078021174,-2.2023661289063057],[47.14162503226511,-2.2188456210938057],[47.056437320062074,-1.9853861484375557],[46.856255450143586,-2.2641642246094307],[46.574937063453554,-1.8652231845703682],[46.35795818720824,-1.467998758300837],[46.1046055772767,-1.2034685764160713],[45.96477128178857,-1.08240439031988],[45.87049960291692,-1.1590941104736885],[45.21130716890447,-0.6752665195313057],[45.55168048748769,-1.1339457187500557],[44.21327588966707,-1.2534220371094307],[43.34093813548435,-1.7196543369141182],[43.22107683237812,-1.601207986816462],[43.265148187755806,-1.4540941867676338],[43.18410665382335,-1.3568909320679268],[43.08691246166359,-1.4574415836182197],[42.96545030946179,-0.8219082507935127],[42.77120766855794,-0.5708964023438057],[42.81454051454543,-0.3374369296875557],[42.76364650665125,-0.15478922460943068],[42.665519875409466,-0.06346537207036818],[42.71334130492125,0.14699147607416307],[42.68880429960194,0.6037824001464287],[42.82980685114,0.6783692684325615],[42.75515485185627,0.8804576244506279],[42.69357526722624,1.2781326618346611],[42.45235760785342,1.4220385399016777],[42.461213176784234,1.757663353935186],[42.35207579961633,2.00238005782694],[42.402987389901774,2.2785470035228172],[42.322919000720184,2.603398054495756],[42.46951413530771,2.963577486232225],[42.672059949294834,3.0557765771004597],[42.84978903626439,3.0600850429686943],[43.19666326804068,3.2235066738280693],[43.465126579815255,3.854533895507757],[43.414022826579625,4.441615804687444],[43.055339155694746,6.165096029296819],[43.45216776234691,7.015849813476507],[43.848018960737804,7.627994283691351],[44.209769198599254,7.756740316406194],[44.12899607148551,7.363979085937444],[44.24490158954048,6.973743239075247],[44.58009848139329,6.9130972359630505],[44.700679539388446,7.077449760988657],[44.84769610180468,6.966701686039869],[44.86210851488837,6.833980954841081],[44.92320975117712,6.767178192392294],[45.12047156089804,6.653775736347143],[45.157704197484804,6.822478636756841],[45.185655727562725,7.050021156326238],[45.28791282593074,7.153543695465032],[45.383950359177895,7.09691689874262],[45.5139824685734,7.027608617797796],[45.6504050666853,6.9768826809081474],[45.7098321340294,6.816293462768499],[45.83047053520352,6.831485494628851],[45.88379141256974,7.002116903320257],[45.944462326623096,7.035762533203069],[46.111322380153624,6.905299886718694],[46.29344428693379,6.841431779163258],[46.39925025159745,6.733618359107709],[46.38336035965266,6.496018862746723],[46.3818907170957,6.328437057524752],[46.3486256610649,6.256945322081037],[46.23645933089946,6.267770444943494],[46.25506385545267,6.113639440668294],[46.413580653099366,6.0910219633678935],[46.59351599189146,6.133677633767206],[46.78635848683744,6.460688193315718],[46.97543510538736,6.477502281162856],[47.00809139652505,6.642966394357018],[47.133169434634866,6.820086026995568],[47.367565333981396,7.042489354772442],[47.388858089847,6.91600694782619],[47.505684794285166,7.080522602683686],[47.442182288818614,7.233772662398792],[47.43398671003688,7.3864641880788895],[47.52156345159446,7.516065989439085],[47.63708985203269,7.577515685909475],[47.764093092293145,7.546606485100483],[47.98776798681809,7.6166240209823854],[48.13980652190989,7.602850498996077],[48.3696046313755,7.729112048773459],[48.59412024625888,7.805853898328223],[48.794706234110755,8.047228222437752],[48.96320037339876,8.20038702690681],[49.05429567832047,7.913442917094926],[49.07791799985603,7.625199228721158],[49.168247523284606,7.466192320723621],[49.147605318387306,7.323959754728548],[49.13505589805018,7.1933032164884025],[49.18181296163061,7.085798733758111],[49.21781918149824,6.936707737047527],[49.18933171434532,6.79233433737636],[49.27586939590279,6.657396131784026],[49.434202948052565,6.585273626849357],[49.50738806667039,6.30919267948002],[49.49670041919035,6.086620628491346],[49.546652578434674,5.795285120263998],[49.54671044318034,5.476285978809301],[49.70333770015632,5.300109102979604],[49.83112334813648,4.904205664649908],[50.142160102847875,4.770787223831121],[49.945065582200456,4.503950342193548],[50.00250909050815,4.190003141418401],[50.22977216103507,4.221288427368108],[50.38777841302382,3.7565152492675224],[50.548886875093935,3.3543126430663506],[50.81395866210835,3.165141805664007],[50.73167163140262,2.8746907558593193],[51.10783032499841,2.5135152187499443]]';
	var triangleCoords = new Array();
	var selectedAreaVerticesArr = JSON.parse(selectedAreaVerticesStr);
	var areaOfOperation, tbxhr;   
	var stripeAPIloaded = false;
	var url_booking_type = '';
	if(url_booking_type!="")
	{
		tbjQuery('#booking_type').val(url_booking_type);
		var pickup_type = 'poi';
		var pickup_poi = 0;
		var pickup_address = '';
		var pickup_lat = '';
		var pickup_lng = '';
		var dropoff_type = 'poi';
		var dropoff_poi = 0;
		var dropoff_address = '';
		var dropoff_lat = '';
		var dropoff_lng = '';
		var route_pickup_category = 0;
		var route_pickup_poi = 0;
		var route_dropoff_category = 0;
		var route_dropoff_poi = 0;
		var hourly_hr = 0;
		var hourly_min = 0;
		var shuttle_pickup_catid = 0;
		var shuttle_pickup_poi = 0;
		var shuttle_dropoff_catid = 0;
		var shuttle_dropoff_poi = 0;
		var shuttle_pickup_date = '';
		var shuttle_pickup_time = '';
		var shuttle_passengers = 0;
		var url_tour_id = 0;
		var url_tour_pickup_poi = 0;
		var url_coupon_id = 0;
		var url_cname = '';
		var url_cemail = '';
		var url_cphone = '';
		var url_extras = [];
		if(url_booking_type=='orders'){
		var url_order_number = '';
		}
	}
	var TBFSettings = new function ()
	{
		this.addressBookingEnabled = true;
		this.fixedFareBookingEnabled = false;
		this.routeSwappingEnabled = false;
		this.hourlyBookingEnabled = false;
		this.showPOICategories = false;
		this.showPOICategoriesShuttle = 0;
		this.stopsEnabled = false;
		this.combinePickupPointPlace = false;
		this.combineDropoffPointPlace = false;
		this.defaultCity = "Paris";
		this.defaultCountry = "FR";
		this.defaultMapLat = '';
		this.defaultMapLng = '';
		this.optimizeStops  = true;
		this.distanceUnit = 'kM';
		this.DatePickerFormat = "DD-MM-YYYY";
		this.Is12HoursTimeFormat = false;
		this.TimePickerFormat = "HH:mm";
		this.checkPickupAreaOperation = 1;
		this.checkDropoffAreaOperation = 1;
		this.checkPickupDropoffAreaOperation = 1;
		this.returntripEnabled = 1;
		this.showReturnExtras = 0;
		this.orderCreationHoursLimit = 2;
		this.TimeZoneUtcOffset = 0;
		this.carsDefaultDisplay = "grid";
		this.GAPIavoidFerries = false;
		this.GAPIavoidHighways = false;
		this.GAPIavoidTolls = false;
		this.datePickerType = "jquery";
		this.captchaEnabled = true;
		this.numberOfOwnBaseCars = 0;
	};
	
	var TBTranslations = new function ()
	{
		this.BOOKING_FORM_FIRST_STEP_ERROR_MESSAGE = "Oops! S'il vous plaît examiner les erreurs en rouge et essayer à nouveau.";
		this.BOOKING_FORM_SEND_ORDER_COPY_NAME = "Nom";
		this.BOOKING_FORM_SEND_ORDER_COPY_EMAIL = "Email";
		this.BOOKING_FORM_REMOVE_ORDER_COPY_LABEL = "Retirer";
		this.ERR_MESSAGE_FIELD_REQUIRED = "Ce champ est requis";
		this.ERR_MESSAGE_VALID_EMAIL = "S'il vous plaît entrez une adresse e-mail valide";
		this.ERR_MESSAGE_VALID_PHONE = "S'il vous plaît entrez un téléphone valide";
		this.ERR_MESSAGE_VALID_NUMERIC = "Veuillez saisir uniquement la valeur numérique Non-nulle";
		this.ERR_TERMS_CONDITIONS_REQUIRED = "Veuillez accepter nos Conditions générales avant de poursuivre";
		this.ERR_MESSAGE_FIELD_SLASH_NOT_ALLOWED = "Seule la barre oblique ( / ) N'est pas autorisé dans ce champ";
		this.ERR_MESSAGE_CANCEL_ORDER_REFERENCE_NUMBER_EMPTY = "Veuillez entrer le numéro de référence à partir de votre e-mail de confirmation de réservation pour Annuler une réservation.";
		this.BOOKING_FORM_ESTIMATED_DISTANCE_LBL = "Distance estimée";
		this.BOOKING_FORM_DISTANCE_UNIT_MILES_LABEL = "miles";
		this.BOOKING_FORM_DISTANCE_UNIT_KM_LABEL = "Kilomètres";
		this.ERR_MESSAGE_ESTIMATED_DISTANCE_CALCULATE = "Nous n'avons pas pu calculer la distance de l'itinéraire.";
		this.ERR_MESSAGE_INSUFFICIENT_BOOKING_TIME = "La réservation est trop tôt, s'il vous plaît modifier votre heures 2  avant votre départ.";
		this.ERR_MESSAGE_DATETIME_IN_PAST = "Date/Time in the past!";
		this.ERR_ENTER_SECURITY_CODE = "Veuillez saisir le code de sécurité.";
		this.DAILY_HIRE_DROPOFF_TIME_INFO = "If Drop off time is past %s, another Day will be added to your bill.";
		this.BOOKING_FORM_SERVICE_CHARGE_POSITIVE_NUMBER_MUST = "Service charge must be a Positive number";
		this.BOOKING_FORM_ESTIMATED_DURATION_LBL = "Temps estimé";
		this.CAR_LIST_ESTIMATED_TIME_HR = "%s hrs ";
		this.CAR_LIST_ESTIMATED_TIME_MIN = "%s min";
		this.ORDERS_TABLE_SEARCH = "Chercher";
		this.MYORDERS_TABLE_ZERO_RECORDS_LABEL = "ien n'a été trouvé - désolé";
	};
	function setModalMaxHeight(element) {
		this.$element     = tbjQuery(element);  
		this.$content     = this.$element.find('.modal-content');
		var borderWidth   = this.$content.outerHeight() - this.$content.innerHeight();
		var dialogMargin  = tbjQuery(window).width() < 768 ? 20 : 60;
		var contentHeight = tbjQuery(window).height() - (dialogMargin + borderWidth);
		var headerHeight  = this.$element.find('.modal-header').outerHeight() || 0;
		var footerHeight  = this.$element.find('.modal-footer').outerHeight() || 0;
		var maxHeight     = contentHeight - (headerHeight + footerHeight);
	
		this.$content.css({
		'overflow': 'hidden'
		});
		
		this.$element
		.find('.modal-body').css({
		'max-height': maxHeight,
		'overflow-y': 'auto'
		});
	}
	
	window.addEventListener("message", onmessage, false);
	window.onmessage = function(e){
		// e.data contains message
		// e.origin will equal NULL as theres no domain in UIWebView
		if(e.data=='KEYBOARD_SHOWN'){
			if (tbjQuery('.modal.in').length != 0) {
				setModalMaxHeight(tbjQuery('.modal.in'));
			}
			else {
				var center = tbjQuery(window).height()/2;
				var top = tbjQuery(":focus").offset().top ;
				if (top > center){
				tbjQuery(window).scrollTop(top-center);
				}
			}
		}
		else if(e.data=='BACK_BUTTON_CLICK'){
			if(tbjQuery('.modal.in').length > 0){
				tbjQuery('.modal').modal('hide');
			}
			else {
				parent.postMessage('CMD_CLOSE_APP', '*');
			}
		}
	}